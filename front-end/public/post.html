<!DOCTYPE html>
<head>
    <title>post</title>
    <style>
        .cen{align-items:center;}
        .flex{display:flex;flex-direction:column;}
        .gapt{padding-top:15px;}
        .pad{padding: 10px;}
        .space{margin-left:60px;margin-right:60px;margin-top:15px;margin-bottom:15px;}
        .prof-cd-size{width:600px;height:150px;}
    </style>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.2/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        $(document).ready(()=>{
            var URLbe=window.location.toString().split('/')[2]
            $('#title').change(()=>{
                console.log($('#title').val());
            });
            $('#body').change(()=>{
                console.log($('#body').val());
            });
            $('#addPost').click(()=>{
                //headers:{'authorization':localStorage.getItem('token')}
                var title=$('#title').val();
                var body=$('#body').val();
                var uID=$('#uID').val();
                var cID=$('#cID').val();
                var data={title:title,bdy:body,uID:uID,cID:cID};
                console.log(data);
                window.location
                $.ajax({
                    url:`http://${window.location.toString().split('/')[2]}/be/addPost`,
                    type:'POST',
                    data:data,
                    success:(resBdy,txtStat,xhr)=>{
                        console.log('data: '+data,'response: ',resBdy);
                    },error:(xhr,txtStat,error)=>{
                        console.log('error in operation','data\n',data,'xhr',xhr,'txtStat',txtStat,'error',error);
                    }
                });return false;
            });
        });
    </script>
  </head>
<body class="space">
    <div class="row">
        <div class="container col-md-8 col-lg-9 bg-info p-10 pad gapt">
            <form>
                <div class="flex">
                    <label for='title' class='cen'>Title</label>
                </div>
                <input type='text' id='title' name='title'>
                <div class="flex">
                    <label for='body' class='cen'>content</label>
                    <textarea id='body' name='body' rows="2" cols="10"></textarea>
                </div><br>
                <label for="uID">user ID</label>
                <input type='number'id='uID'name='uID'></input>
                <div id="uName"></div> 
                <label for="cID">channel ID</label>
                <input type='number'id='cID'name='cID'></input>
                <div id="cName"></div> 
                <button id='addPost'>post</button>
            </form>
        </div>
        <div class="container d-none d-md-flex col-md-4 col-lg-3 justify-content-center">
            <div class="bg-success prof-cd-size">
                <div>profile</div>
            </div>
        </div>
    </div>
    <script>
        console.log(window.location.search);
        if(window.location.search){
            console.log(true,window.location.toString().split('/'),`${window.location.toString().split('/')[2]}/be/getPost`+window.location.search);
            $.ajax({
                url:`http://${window.location.toString().split('/')[2]}/be/getPost`+window.location.search
                ,type:'GET'
                ,success:function(resBdy,txtStat,xhr){
                    console.log('--------response data (post)----------');
                    console.log(resBdy,resBdy.length,resBdy[0]);
                    $('#title').val(resBdy[0].postsTitle);
                    $('#body').val(resBdy[0].postsContent);
                    $('#uID').val(resBdy[0].fk_userID);
                    $('#cID').val(resBdy[0].fk_channelID);
                    $('#uName').val(resBdy[0].username);
                    $('#cName').val(resBdy[0].subreddit);
                    // uID=resBdy.fk_userID;
                    // cID=resBdy.fk_channelID;
                    // cont=resBdy.postsContent;
                    // title=resBdy.postsTitle;
                }
                ,error:function(xhr,txtStat,error){
                    console.log(false);
                    $('#cID').val(1)
                    $('#uID').val(1)
                }
            });
        }else{
            console.log(false);
            $('#cID').val(1);
            $('#uID').val(1);
        }
    </script>
</body>
</html>